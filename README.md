YaPi REST API 
==============
> Тестовое задание на поступление в школу бэкэнд-разработки Яндекс

Назначение
----------

Веб-служба, разработанна на **Python** с ипользованием фреймворка **Flask** и 
предназначена для хранения поступающих наборов данных ( выгрузок от поставищиков ) 
с жителями, позволяет их просматривать и редактировать информацию об отдельных жителях.

Реализованные методы
--------------------

1. Принимает на вход набор с данными о жителях в формате `json` и сохраняет его с уникальным идентификатором `import_id`:

        POST | /imports

2. Изменяет информацию о жителе в указанном наборе данных:

        PATCH | /imports/ <int: import_id> /citizens/ <int: citizens_id>

3. Возвращает список всех жителей для указанного набора данных:

        GET | /imports/ <int: import_id> /citizens

Установка
---------

1. Установите Python 3.
2. Запустите `setup.sh` (Linux, OS X, Cygwin) или `setup.bat` (Windows): в директории будет создано виртуальное окружение и установлены все необходимые раширения для работы приложения. В другом случае, выполните следующие команды:

        $ python -m venv venv                                 (Linux)
        $ venv/Scripts/pip install -r requirements.txt

        python -m venv venv                                 (Windows)
        venv\Scripts\pip install -r requirements.txt

3. Выполните команду `./manage.py db upgrade` или `venv\scripts\python manage.py db upgrade` для создания и обновления базы данных приложения.

4. Чтобы запустить сервер для разработки, выполните:
        
        $ ./manage.py runserver                               (Linux)
        venv\Scripts\python manage.py runserver             (Windows)

Зависимости приложения
----------------------
Приложение для работы использует фреймворк `Flask` и его расширения:

- `Flask-SQLAlchemy` — фреймворк для работы с реляционными базами данных
- `Flask-Script` — парсер командной строки
- `Flask-Migrate` — фреймворк миграции базы данных

А так же расширение `Cerebrus` для реализации валидации входящих данных и клиент `HTTPie` для тестирование веб-службы.

>Все остальные зависимости описаны в файле `requirements.txt`

Тестирование
------------
Чтобы произвести модульное тестирование выполните следующую команду:

        $ ./manage.py test                                     (Linux)
        venv\Scripts\python manage.py test                   (Windows)

Для модульного тестирования с охватом покрытия, в файле `manage.py` измените значение атрибута **coverage** функции *test()* на `True` и выполните описанную выше команду `test`:

        @manager.command
        def test( coverage = True ):
            # ...

Структура приложения
--------------------
        yapi
        ├── app
        │   ├── main
        |   |   ├── __init__.py     # создание макета приложения
        |   |   ├── errors.py       # обработчики ошибок
        |   |   └── views.py        # функции представления
        │   ├── __init__.py         # конструктор пакета приложения
        │   ├── models.py           # модели базы данных
        │   ├── relatives.py        # функции для установкии двусторонности родства
        │   └── validation.py       # схема и функции валидации
        ├── migrations              # файлы миграции базы данных
        |   └── ...
        ├── tests
        |   ├── __init__.py
        |   ├── test_api.py         # набор тестирования веб-службы
        |   ├── test_basics.py      # базовое тестирование
        |   └── ...
        ├── manage.py               # инициализация приложения
        ├── config.py               # настройки приложения
        └── ...
